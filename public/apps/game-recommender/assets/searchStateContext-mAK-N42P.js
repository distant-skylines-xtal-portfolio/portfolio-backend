import{R as h}from"./chunk-OIYGIGL5-D4m_JISv.js";class d{static buildSearchPath(e,r=0){if(e.length===0)return"";const o=e.reduce((t,n)=>{const p=this.getTypePrefix(n.type);return t[p]||(t[p]=[]),t[p].push(this.slugify(n.name)),t},{}),a=[];return Object.entries(o).forEach(([t,n])=>{a.push(`${t}:${n.join(",")}`)}),r>0&&a.push(`offset:${r}`),a.join("/")}static parseSearchPath(e,r){if(!e)return{tags:[],offset:0};const o=e.split("/").filter(Boolean),a=[];let t=0;return o.forEach(n=>{const[p,c]=n.split(":");p==="offset"&&(t=parseInt(c,10)||0);const m=c.split(",").map(i=>this.unslugify(i)),f=this.getTypeFromPrefix(p);f&&m.forEach(i=>{let l;f==="genre"&&r.genreTags?l=r.genreTags.find(s=>this.normalizeForComparison(s.name)===this.normalizeForComparison(i)):f==="platform"&&r.platformTags?l=r.platformTags.find(s=>this.normalizeForComparison(s.name)===this.normalizeForComparison(i)||this.normalizeForComparison(s.abbreviation)===this.normalizeForComparison(i)||this.normalizeForComparison(s.alternative_name)===this.normalizeForComparison(i)):f==="keyword"&&r.keywordTags&&(l=r.keywordTags.find(s=>this.normalizeForComparison(s.name)===this.normalizeForComparison(i))),l&&a.push(l)})}),{tags:a,offset:t}}static getTypePrefix(e){return{genre:"g",platform:"p",keyword:"k",theme:"t"}[e]||e.charAt(0)}static getTypeFromPrefix(e){return{g:"genre",p:"platform",k:"keyword",t:"theme",m:"mode",per:"perspective",c:"company"}[e]||null}static normalizeForComparison(e){return e?e.toLowerCase().replace(/[^a-z0-9]/g,""):""}static slugify(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/--+/g,"-")}static unslugify(e){return e.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}static buildSearchUrl(e,r=0){const o=this.buildSearchPath(e,r);return o?`/search/${o}`:"/"}static buildDetailUrl(e,r){return r?`detail/${e}?from=${encodeURIComponent(r)}`:`detail/${e}`}static getSearchPathFromLocation(e){return e.startsWith("/search")?e.slice(8):""}}const y=h.createContext(null);export{d as S,y as s};
